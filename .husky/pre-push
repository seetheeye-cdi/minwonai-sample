#!/bin/bash
echo "ğŸš€ Running pre-push checks..."

# ë³‘ë ¬ ì‹¤í–‰ ì‹œì‘
pnpm typecheck &
TYPECHECK_PID=$!

pnpm lint &
LINT_PID=$!

pnpm test &
TEST_PID=$!

echo "â³ Running typecheck, lint, and test in parallel..."

# ê° í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ ëŒ€ê¸° ë° ì¢…ë£Œ ì½”ë“œ í™•ì¸
wait $TYPECHECK_PID
TYPECHECK_EXIT=$?

wait $LINT_PID
LINT_EXIT=$?

wait $TEST_PID
TEST_EXIT=$?

# ê²°ê³¼ í™•ì¸
if [ $TYPECHECK_EXIT -ne 0 ]; then
  echo "âŒ Typecheck failed!"
  exit 1
fi

if [ $LINT_EXIT -ne 0 ]; then
  echo "âŒ Lint failed!"
  exit 1
fi

if [ $TEST_EXIT -ne 0 ]; then
  echo "âŒ Test failed!"
  exit 1
fi

echo "âœ… All pre-push checks passed!" 