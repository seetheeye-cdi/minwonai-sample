---
description:
globs:
alwaysApply: true
---
# CivicAid MVP PRD – 린 파일럿 버전 (군포시 ➜ 서대문구)

## 1. 한줄 요약
AI 분류·자동 알림으로 전화‧문자 업무 부담을 확 줄여주는 멀티채널 민원 처리 SaaS.

## 2. 목표 및 성공 지표
1. 전화‧문자 안내량 50% 이상 감소 (파일럿 기관 4주 측정)
2. 최초 진행 알림 발송율 90% 이상, 클릭율 60% 이상
3. 평균 답변 완료 시간 30% 단축

## 3. 핵심 사용자
민원 담당 비서관·직원(지역사무소 실무자)

## 4. 핵심 페인포인트
시민에게 진행 상황을 전화·문자로 수동 안내하느라 업무가 과부하된다.

## 5. 기능 범위 (MVP 6-8주)
| 구분 | 포함 여부 | 설명 |
|------|-----------|------|
|AI 카테고리 분류·자동 배정|✓|LLM 기반 텍스트 분석 → 담당자 매핑|
|AI 답변 초안 생성|✓|카테고리·감정 톤 기반 자동 문안, 1-클릭 발송|
|실시간 알림(카카오, SMS, 이메일)|✓|접수·상태변경·답변완료 이벤트 트리거|
|시민용 진행 타임라인 페이지|✓|토큰 URL, 모바일 최적화, 다크모드|
|감정 분석 우선태그|✓|High-Priority 뱃지, 필터 지원|
|실시간 통계 대시보드|✓|오늘/주간 접수·완료·지연 KPI, 임박 SLA 리스트|
|고급 검색·필터|✓|카테고리·우선순위·담당자·기간|
|시민 만족도 조사|✓|답변 24h 후 자동 발송, 5점 척도|
|다단계 승인, 공문 PDF|✗ 2차|MVP 제외|
|온프레미스/키오스크|✗ 3차|로드맵 미표기|

## 6. 주요 워크플로우 (메인 시나리오)
1. 민원 접수 → 시스템이 즉시 AI 분류 & 담당자 배정 (≤5초)
2. 담당자가 인박스에서 티켓 클릭 → 우측 패널에 상세·AI 초안·"발송" 버튼 표시
3. 담당자가 초안 검토·수정 후 "발송" 클릭 (1-클릭)
4. 시스템: 답변 저장 → 상태 "답변 완료" → 시민에게 알림(채널별) → 타임라인 갱신

## 7. 알림 정책
- 채널 우선순위: 카카오 알림톡 > SMS(백업) > 이메일(전문)
- 이벤트: 접수확인, 담당자지정, 답변완료, 만족도요청
- SLA 임박(남은 24h) 시 담당자·상급자 이메일+웹푸시

## 8. 기술 스택 (BASE)
Next.js 15 · Supabase · Clerk · LemonSqueezy · pnpm monorepo · shadcn · lucide-react · TypeScript · @tanstack/react-query

## 9. 개발 일정
Week 1  : 프로젝트 셋업, DB 스키마, Clerk Auth
Week 2  : AI 분류 서비스 연동, 인박스 UI
Week 3  : AI 답변 초안 모듈, 우측 패널 UX
Week 4  : 알림 서비스(Kakao, SMS, Email) 연동
Week 5  : 시민 타임라인, 대시보드 v1
Week 6  : SLA/감정 태깅, 만족도 조사, 버그픽스
Week 7-8: 군포시 파일럿 운영 & 피드백, 서대문구 준비

## 10. 리스크 & 대응
- Kakao 비즈메시지 심사 지연 → SMS 백업 채널 즉시 가동
- AI 오분류 → 수동 수정 로그로 주간 재학습 파이프라인 마련
- 공공망 보안 점검 → Supabase IP allowlist, ISO 27001 보고서 제공

## 11. 향후 확장(비-MVP)
• 다단계 승인 & 공문 PDF
• 챗봇 사전응대, 온프레미스 옵션, 오프라인 키오스크
• 빅데이터 인사이트 리포트
