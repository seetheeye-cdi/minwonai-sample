---
description:
globs:
alwaysApply: true
---
# CivicAid 정보 구조 설계서 (Information Architecture)

## 1. 사이트맵 (사이트맵)

```
CivicAid 플랫폼
├── 인증 (Authentication)
│   ├── 로그인 (/auth/login)
│   ├── 회원가입 (/auth/signup)
│   └── 비밀번호 재설정 (/auth/reset-password)
├── 대시보드 (/dashboard)
│   ├── 개요 KPI (/dashboard/overview)
│   ├── 만족도 통계 (/dashboard/satisfaction)
│   └── 실시간 알림 로그 (/dashboard/notifications)
├── 민원함 (/inbox)
│   ├── 전체 티켓 (/inbox/all)
│   ├── 높은 우선순위 (/inbox/high-priority)
│   ├── SLA 임박 (/inbox/sla-approaching)
│   ├── 내 담당 (/inbox/assigned-to-me)
│   └── 티켓 상세 (/inbox/ticket/:id)
├── 시민 진행 상황 (Public)
│   └── 타임라인 페이지 (/timeline/:token)
├── 지식 베이스 (/knowledge-base)
│   ├── 카테고리별 가이드 (/knowledge-base/categories)
│   ├── 자주 묻는 질문 (/knowledge-base/faq)
│   └── 답변 템플릿 (/knowledge-base/templates)
├── 설정 (/settings)
│   ├── 조직 관리 (/settings/organization)
│   ├── 사용자 및 역할 (/settings/users)
│   ├── 알림 템플릿 (/settings/notification-templates)
│   ├── SLA 규칙 (/settings/sla-rules)
│   └── 개인 설정 (/settings/profile)
└── 도움말 (/help)
    ├── 사용자 가이드 (/help/user-guide)
    └── 온보딩 위저드 (/help/onboarding)
```

## 2. 사용자 흐름 (사용자 흐름)

### **핵심 작업 1: 민원 처리 워크플로우**
1. 사용자가 로그인 후 대시보드에서 '새 민원 알림' 확인
2. '민원함' 메뉴 클릭하여 인박스 페이지로 이동
3. 우선순위 높은 티켓을 클릭하여 상세 정보 확인
4. 우측 슬라이드 패널에서 AI 생성 답변 초안 검토
5. 답변 내용 수정 및 톤 조정
6. '발송' 버튼 클릭으로 답변 전송
7. 시스템이 자동으로 시민에게 알림 발송
8. 티켓 상태가 '답변 완료'로 자동 변경
9. 대시보드에서 처리 완료 통계 확인

### **핵심 작업 2: 시민 진행 상황 확인**
1. 시민이 민원 접수 시 받은 알림의 링크 클릭
2. 토큰 기반 타임라인 페이지 접근 (로그인 불필요)
3. 진행 단계별 상태 확인 (접수→배정→진행→완료)
4. 최신 업데이트 및 답변 내용 확인
5. 답변 완료 시 만족도 조사 참여 (선택사항)

### **핵심 작업 3: 관리자 설정 및 모니터링**
1. 관리자가 '설정' 메뉴 접근
2. '알림 템플릿' 섹션에서 카테고리별 자동 답변 템플릿 관리
3. 'SLA 규칙' 설정으로 카테고리별 응답 시간 기준 정의
4. '사용자 및 역할'에서 담당자 권한 및 배정 규칙 설정
5. 대시보드에서 실시간 KPI 및 SLA 준수율 모니터링

## 3. 네비게이션 구조 (네비게이션 구조)

### **주 네비게이션 (좌측 고정 사이드바)**
- **대시보드** (홈 아이콘)
  - 오늘의 KPI 요약
  - SLA 임박 알림
- **민원함** (인박스 아이콘)
  - 전체 티켓 (기본값)
  - 높은 우선순위 필터
  - SLA 임박 필터
  - 내 담당 필터
- **지식 베이스** (북 아이콘)
  - 답변 가이드
  - 템플릿 라이브러리
- **설정** (기어 아이콘)
  - 조직 관리
  - 알림 설정

### **상단 글로벌 바**
- 로고 (CivicAid)
- 검색창 (티켓 번호, 시민명, 내용 검색)
- 알림 벨 아이콘 (실시간 알림)
- 사용자 프로필 드롭다운

### **우측 슬라이드 패널 (티켓 상세 시)**
- 티켓 정보 헤더
- 탭 네비게이션:
  - AI 답변 초안
  - 대화 이력
  - 활동 로그

### **모바일 네비게이션**
- 햄버거 메뉴로 사이드바 내용 드로어 형태 제공
- 하단 탭바: 대시보드, 민원함, 알림, 설정

## 4. 페이지 계층 구조 (페이지 계층 구조)

```
/ (루트 - 깊이 1)
├── /auth (인증 - 깊이 1)
│   ├── /auth/login (로그인 - 깊이 2)
│   ├── /auth/signup (회원가입 - 깊이 2)
│   └── /auth/reset-password (비밀번호 재설정 - 깊이 2)
├── /dashboard (대시보드 - 깊이 1)
│   ├── /dashboard/overview (개요 - 깊이 2)
│   └── /dashboard/satisfaction (만족도 통계 - 깊이 2)
├── /inbox (민원함 - 깊이 1)
│   ├── /inbox/all (전체 티켓 - 깊이 2)
│   ├── /inbox/high-priority (높은 우선순위 - 깊이 2)
│   ├── /inbox/sla-approaching (SLA 임박 - 깊이 2)
│   ├── /inbox/assigned-to-me (내 담당 - 깊이 2)
│   └── /inbox/ticket/:id (티켓 상세 - 깊이 2)
├── /knowledge-base (지식베이스 - 깊이 1)
│   ├── /knowledge-base/categories (카테고리 가이드 - 깊이 2)
│   ├── /knowledge-base/faq (자주 묻는 질문 - 깊이 2)
│   └── /knowledge-base/templates (답변 템플릿 - 깊이 2)
├── /settings (설정 - 깊이 1)
│   ├── /settings/organization (조직 관리 - 깊이 2)
│   ├── /settings/users (사용자 관리 - 깊이 2)
│   ├── /settings/notification-templates (알림 템플릿 - 깊이 2)
│   ├── /settings/sla-rules (SLA 규칙 - 깊이 2)
│   └── /settings/profile (개인 설정 - 깊이 2)
└── /timeline/:token (시민 타임라인 - 깊이 1, 공개)
```

## 5. 콘텐츠 구성 (콘텐츠 구성)

| 페이지 | 주요 콘텐츠 요소 |
|---|---|
| **대시보드** | KPI 카드 (오늘/주간 접수·완료·지연), SLA 임박 리스트, 실시간 통계 차트, 만족도 점수 요약 |
| **민원함 리스트** | 티켓 테이블 (ID, 제목, 카테고리, 우선순위 배지, 담당자, SLA 상태, 접수일), 필터 바, 검색창 |
| **티켓 상세 (우측 패널)** | 티켓 헤더 (ID, 상태 배지, SLA 타이머), AI 답변 초안 에디터, 톤 조정 드롭다운, 발송 버튼, 대화 이력 |
| **시민 타임라인** | 진행 단계 표시기, 최신 업데이트 피드, 답변 내용 표시, 만족도 조사 폼 (답변 완료 시) |
| **지식베이스** | 카테고리별 가이드 리스트, 검색 기능, 답변 템플릿 라이브러리, 자주 묻는 질문 아코디언 |
| **설정 - 조직 관리** | 조직 정보 폼, 담당자 배정 규칙 테이블, 카테고리 관리 섹션 |
| **설정 - 알림 템플릿** | 템플릿 편집기, 변수 삽입 도구, 미리보기 패널, 채널별 설정 (카카오/SMS/이메일) |
| **설정 - SLA 규칙** | 카테고리별 응답 시간 설정 테이블, 에스컬레이션 규칙, 알림 설정 |
| **로그인/회원가입** | 인증 폼, 조직 코드 입력, 소셜 로그인 옵션, 비밀번호 재설정 링크 |

## 6. 인터랙션 패턴 (인터랙션 패턴)

### **모달 사용 패턴**
- **확인 모달**: 중요한 액션 (답변 발송, 티켓 삭제, 설정 변경) 시 사용
- **정보 모달**: 상세 정보 표시 (만족도 상세 피드백, 활동 로그 전체 보기)
- **편집 모달**: 빠른 편집 작업 (카테고리 수정, 사용자 권한 변경)

### **툴팁 사용 패턴**
- **도움말 툴팁**: 복잡한 기능이나 용어 설명
- **상태 툴팁**: 배지나 아이콘에 마우스 오버 시 상세 정보 제공
- **단축키 툴팁**: 버튼 호버 시 키보드 단축키 안내

### **실시간 업데이트 패턴**
- **토스트 알림**: 성공/오류 피드백, 자동 해제 (4초)
- **배지 업데이트**: 새 민원 접수, SLA 임박 시 실시간 카운터 변경
- **상태 표시기**: 답변 발송 중, AI 분석 중 등 진행 상황 표시

### **무한 스크롤 패턴**
- **티켓 리스트**: 페이지네이션 대신 무한 스크롤로 성능 최적화
- **대화 이력**: 과거 대화 내용을 점진적으로 로드

### **드래그 앤 드롭 패턴**
- **우선순위 조정**: 티켓 리스트에서 드래그로 우선순위 변경 (관리자 권한)
- **파일 업로드**: 첨부파일 드래그 앤 드롭 영역

## 7. URL 구조 (URL 구조)

### **일반 원칙**
- **RESTful 패턴**: `/리소스명` 또는 `/리소스명/:id`
- **계층적 구조**: 상위-하위 관계를 URL에 반영
- **한국어 피하기**: 모든 URL은 영문으로 구성
- **케밥 케이스**: 단어 구분은 하이픈(-) 사용

### **구체적 URL 매핑**
```
인증 관련:
- /auth/login
- /auth/signup
- /auth/reset-password

메인 기능:
- /dashboard (기본 대시보드)
- /dashboard/overview
- /dashboard/satisfaction

민원 관리:
- /inbox (전체 티켓 리스트)
- /inbox/high-priority
- /inbox/sla-approaching
- /inbox/assigned-to-me
- /inbox/ticket/[ticket-id]

지식 관리:
- /knowledge-base
- /knowledge-base/categories/[category-id]
- /knowledge-base/templates/[template-id]

설정:
- /settings/organization
- /settings/users
- /settings/notification-templates
- /settings/sla-rules
- /settings/profile

공개 페이지:
- /timeline/[secure-token] (시민용)
```

### **쿼리 파라미터 패턴**
- 필터링: `?category=housing&priority=high`
- 검색: `?search=전기안전&sort=created_desc`
- 페이지네이션: `?page=2&limit=20`

## 8. 컴포넌트 계층 구조 (컴포넌트 계층 구조)

### **글로벌 컴포넌트**
- **AppLayout**: 전체 레이아웃 래퍼
  - **Header**: 상단 글로벌 네비게이션
    - **SearchBar**: 통합 검색
    - **NotificationBell**: 실시간 알림
    - **UserMenu**: 사용자 프로필 드롭다운
  - **Sidebar**: 좌측 네비게이션
    - **NavItem**: 개별 네비게이션 항목
    - **NavSection**: 네비게이션 그룹
  - **MainContent**: 메인 콘텐츠 영역
  - **SlidePanel**: 우측 슬라이드 패널 (티켓 상세)

### **페이지별 컴포넌트**

#### **대시보드 페이지**
- **DashboardLayout**
  - **KPICard**: KPI 지표 카드
  - **SLAAlertList**: SLA 임박 알림 리스트
  - **StatChart**: 통계 차트 (Line, Bar)
  - **SatisfactionSummary**: 만족도 요약

#### **민원함 페이지**
- **InboxLayout**
  - **FilterBar**: 필터링 도구모음
  - **TicketTable**: 티켓 목록 테이블
    - **TicketRow**: 개별 티켓 행
    - **PriorityBadge**: 우선순위 배지
    - **SLATimer**: SLA 남은 시간 표시
  - **TicketDetail**: 티켓 상세 (슬라이드 패널)
    - **TicketHeader**: 티켓 정보 헤더
    - **AIAnswerDraft**: AI 답변 초안 에디터
    - **ConversationThread**: 대화 이력
    - **ActivityLog**: 활동 로그

#### **시민 타임라인 페이지**
- **TimelineLayout**
  - **ProgressBar**: 진행 단계 표시
  - **UpdateFeed**: 업데이트 피드
  - **SatisfactionSurvey**: 만족도 조사 폼

### **공통 UI 컴포넌트**
- **Button**: 다양한 스타일의 버튼
- **Input**: 입력 필드 (텍스트, 이메일, 비밀번호)
- **Select**: 드롭다운 선택
- **Modal**: 모달 다이얼로그
- **Toast**: 알림 메시지
- **Badge**: 상태 배지
- **Card**: 카드 컨테이너
- **Table**: 데이터 테이블
- **Tooltip**: 도움말 툴팁
- **LoadingSpinner**: 로딩 인디케이터
- **EmptyState**: 빈 상태 일러스트레이션

### **비즈니스 로직 컴포넌트**
- **AIAnswerGenerator**: AI 답변 생성 로직
- **NotificationSender**: 알림 발송 로직
- **SLACalculator**: SLA 계산 및 모니터링
- **CategoryClassifier**: 민원 카테고리 자동 분류
- **SatisfactionTracker**: 만족도 추적 및 분석
